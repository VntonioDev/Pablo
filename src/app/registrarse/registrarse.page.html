<ion-header>
  <div class="logo-container">
    <img src="assets/imagenes/IconoHydro.png" alt="IconoHydro" class="logo-image-left">
    <h1>HydroGuard</h1>
    <img src="assets/imagenes/IconoHydro.png" alt="IconoHydro" class="logo-image-right" style="transform: scaleX(-1);">
  </div>
</ion-header>

<ion-content class="registrarse-page">
  <div class="registrarse-container">
    <h2 class="title">Registrarse</h2>

    <ion-item class="input-label">
      <ion-icon slot="start" name="person-outline"></ion-icon>
      <ion-input 
        type="text" 
        placeholder="Ingrese Nombre" 
        [(ngModel)]="firstName" 
        (ngModelChange)="onFirstNameChange()">
      </ion-input>
    </ion-item>
    
    <ion-item class="input-item">
      <ion-icon slot="start" name="person-outline"></ion-icon>
      <ion-input 
        type="text" 
        placeholder="Ingrese Apellido" 
        [(ngModel)]="lastName" 
        (ngModelChange)="onLastNameChange()">
      </ion-input>
    </ion-item>

    <ion-item class="input-item">
      <ion-icon slot="start" name="mail-outline"></ion-icon>
      <ion-input type="email" placeholder="Ingrese Correo Electrónico" [(ngModel)]="email"></ion-input>
    </ion-item>

    <ion-item class="input-item">
      <ion-icon slot="start" name="lock-closed-outline"></ion-icon>
      <ion-input 
        [type]="showPassword ? 'text' : 'password'" 
        placeholder="Ingrese Contraseña"
        [(ngModel)]="password"></ion-input>
      <ion-button fill="clear" slot="end" (click)="togglePasswordVisibility()">
        <ion-icon [name]="showPassword ? 'eye-off-outline' : 'eye-outline'"></ion-icon>
      </ion-button>
    </ion-item>

    <ion-item class="input-item">
      <ion-icon slot="start" name="lock-closed-outline"></ion-icon>
      <ion-input 
        [type]="showConfirmPassword ? 'text' : 'password'" 
        placeholder="Confirmar Contraseña"
        [(ngModel)]="confirmPassword"></ion-input>
      <ion-button fill="clear" slot="end" (click)="toggleConfirmPasswordVisibility()">
        <ion-icon [name]="showConfirmPassword ? 'eye-off-outline' : 'eye-outline'"></ion-icon>
      </ion-button>
    </ion-item>

    <ion-item>
      <ion-icon slot="start" name="call-outline"></ion-icon>
      <div class="phone-number-container">
        <div class="phone-prefix">+56</div>
        <ion-input
          type="text"
          [(ngModel)]="numeroTelefono"
          maxlength="9"
          placeholder="912345678"
          required
        ></ion-input>
      </div>
    </ion-item>

    <div>
      <p>Número al cual se enviarán las notificaciones de la aplicación.</p>
    </div>

    <ion-button expand="block" class="login-button" (click)="register()">
      Registrarse
    </ion-button>

    <div *ngIf="errorMessage" class="error-message-container animate-error">
      <ion-icon name="close-circle" class="error-icon"></ion-icon>
      <p class="error-text">{{ errorMessage }}</p>
    </div>
    

    <div *ngIf="isLoading" class="loading-container">
      <p>Registrando...</p>
      <ion-spinner name="crescent"></ion-spinner>
    </div>

    <div class="footer" style="text-align: center; margin-top: 20px;">
      <p>¿Ya tienes cuenta? <a (click)="goLogin()" style="color: blue; cursor: pointer;">Inicia sesión</a></p>
    </div>
  </div>
</ion-content>

